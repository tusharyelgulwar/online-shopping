@using Microsoft.AspNetCore.Mvc.TagHelpers
@model IEnumerable<ApplicationCore.Models.TopMovieModel>

@{
    ViewData["Title"] = "Top Movies";
    var rank = 1;
}

<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet" />

<h2 class="mb-4 fw-bold">Top Movies</h2>

<!-- Filter Section -->
<form method="get" class="d-flex justify-content-center bg-light p-3 rounded shadow-sm mb-4">
    <label for="fromDate" class="mt-2 me-3 fw-semibold">From Date</label>
    <div class="input-group me-3" style="max-width: 200px;">
        <input type="date" id="fromDate" name="fromDate" value="@Context.Request.Query["fromDate"]" placeholder="mm/dd/yyyy" class="form-control"/>
        <span class="input-group-text bg-white">
            <i class="bi bi-calendar-event"></i>
        </span>
    </div>

    <label for="toDate" class="me-3 mt-2 fw-semibold">To Date</label>
    <div class="input-group me-3" style="max-width: 200px;">
        <input type="date" id="toDate" name="toDate" value="@Context.Request.Query["toDate"]" placeholder="mm/dd/yyyy" class="form-control"/>
        <span class="input-group-text bg-white">
            <i class="bi bi-calendar-event"></i>
        </span>
    </div>
    
    <button type="submit" class="btn btn-primary">
        <i class="bi bi-search me-1"></i> Search
    </button>
</form>



<!-- Table -->
<table class="table table-bordered table-hover shadow-sm">
    <thead class="table-secondary text-center">
    <tr>
        <th style="width: 60px;">#</th>
        <th class="text-start">Title</th>
        <th style="width: 160px;">Total Purchases</th>
    </tr>
    </thead>
    <tbody>
    @foreach (var movie in Model)
    {
        <tr>
            <td class="text-center">@rank</td>
            <td>@movie.Title</td>
            <td class="text-center fw-semibold">@movie.TotalPurchases</td>
        </tr>
        rank++;
    }
    </tbody>
</table>

<!-- Pagination -->
<nav class="mt-4">
    <ul class="pagination justify-content-center">
        <li class="page-item"><a class="page-link" href="#">«</a></li>
        <li class="page-item active"><a class="page-link" href="#">1</a></li>
        <li class="page-item"><a class="page-link" href="#">2</a></li>
        <li class="page-item"><a class="page-link" href="#">3</a></li>
        <li class="page-item"><a class="page-link" href="#">»</a></li>
    </ul>
</nav>